<p-growl [(value)]="msgs"></p-growl>
<div class="consulta-creator">
        <div class="consulta-creator__title">
            <h1>
                <img src="assets/img/pollo.svg">
                Poller&iacute;a Pardos Chicken
            </h1>
        </div>

        <div class="reserva-creator">
            <!-- widget content -->
            <div class="widget-body">
                <div id="order-form" class="smart-form">
                        <fieldset>    	
                                <legend>Filtros</legend>
                                
<!-- 
                            <div >
                                    <h3>Basic</h3>
                                    <p-calendar [(ngModel)]="date1"></p-calendar>
                                </div> -->

                        <div class="row">

                            
                            <section class="col col-2">
                                <label>Fecha Inicio</label>
                                <label class="input">
                                    <i class="icon-append fa fa-calendar"></i>
                                    <input #newHero
                                            (keyup.enter)="addHero(newHero.value)"
                                            (blur)="addHero(newHero.value); newHero.value=''"
                                            type="text"
                                           placeholder="Seleccionar Fecha"
                                          (keyup)="onGetFechaReserva($event)" 
                                          
                                           saUiDatepicker date-format="dd/MM/yy"/>
                                </label>
                             </section>

                            <section class="col col-2">
                              <label>Fecha Fin</label>
                              <label class="input">
                                  <i class="icon-append fa fa-calendar"></i>
                                  <input #newHero2
                                        (keyup.enter)="addHero2(newHero2.value)"
                                        (blur)="addHero2(newHero2.value); newHero2.value=''" 
                                        type="text"
                                         placeholder="Seleccionar Fecha"
                                        (keyup)="onGetFechaReserva($event)"
                                         saUiDatepicker date-format="dd/MM/yy"/>
                              </label>
                            </section>

                            <section class="col col-2">
                            <label>Local</label>
                            <!-- <label class="input">  -->
                                    <!-- <i class="icon-append fa fa-chevron-down"></i> -->
                                <!-- <tr *ngFor="let asset of abastecimientoResult"></tr> -->
                                <!-- <li *ngFor="let dato of datoslocal" (click)="datoSeleccionado = dato">
                                        {{ dato | json }}
                                      </li> -->
                                <!-- <input type="text" name="local" placeholder="Local"
                                        disabled="disabled"/> -->
                            <!-- </label> -->

                            <select #selectedHeading (change)="headingChanged($event.target.value)" [disabled]='butDisabled' [ngModel]="selectedDevice" >
                                    <option *ngFor="let heading of localresult">
                                            <!-- [value]="heading.val" [ngValue]="heading.nombre_local" [selected]="accountitem.heading === heading.val" -->
                                       {{heading.descripcion}}
                                    </option>
                                </select>
                            </section>

                        <section class="col col-2">

                        </section>

                        <section class="col col-2">

                        </section>

                        <section class="col col-2" style="text-align:right">
                                <label class="label-dummy">&nbsp;</label>
                                <button type="submit" class="btn btn-lg btn-primary" (click)="BuscarTodo(newHero.value,newHero2.value)">
                                    Buscar
                                </button>
                        </section>

                        </div>

                    </fieldset>

                    <fieldset>

                            <div class="row">

                            <!-- <section class="col col-2" style="text-align:left">
                                    <button type="submit" class="btn btn-lg btn-primary" (click)="openModal(template)">
                                            <i class="fa fa-plus-square"> Agregar Pedido</i>  
                                    </button>                                    
                            </section> -->

                            <section class="col col-2" style="text-align:center">
                                    <button type="submit" class="btn btn-lg btn-primary" (click)="openModal(template)">
                                            <i class="fa fa-plus-square"> Agregar Pedido</i>  
                                    </button>                                    
                            </section>

                            <!-- Modal de Agregar Pedido -->
                            <ng-template #template>
                                <div class="modal-header">
                                      <h4 class="modal-title pull-left">Agregar Pedido</h4>
                                      <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                                        <span aria-hidden="true">&times;</span>
                                      </button>
                                </div>
                                <!-- <div class="modal-body" > -->
                                <div class="widget-body" style="height:400px">
                                    <div id="order-form" class="smart-form">
                                        <fieldset> 
                                        <div class="row">        

                                            <section class="col col-4">
                                                <label>Fecha Pedido</label>
                                                <label class="input">
                                                    <i class="icon-append fa fa-calendar"></i>
                                                    <input #newHero3
                                                        (keyup.enter)="addHero3(newHero3.value)"
                                                        (blur)="addHero3(newHero3.value); newHero3.value=''"                                                                                                        
                                                        type="text"
                                                        placeholder="Seleccionar Fecha"
                                                        (keyup)="onGetFechaReserva($event)"
                                                        saUiDatepicker date-format="dd/MM/yy"/>
                                                </label>                                                  
                                            </section>

                                            <!-- <section class="col col-4">
                                                    <label>Local</label>
                                                    <label class="input"> <i class="icon-append fa fa-chevron-down"></i>
                                                        <input type="text" name="Producto" placeholder="Local"
                                                                disabled="disabled"/>
                                                    </label>    
                                            </section> -->

                                            <section class="col col-4">
                                                    <label>Local</label>
                                                <select #selectedHeading2 (change)="headingChanged2($event.target.value)" [disabled]='butDisabled' [ngModel]="selectedDevice" >
                                                    <option *ngFor="let heading of localresult2">
                                                            <!-- [value]="heading.val" [ngValue]="heading.nombre_local" [selected]="accountitem.heading === heading.val" -->
                                                       {{heading.descripcion}}
                                                    </option>
                                                </select>
                                            </section>

                                            <section class="col col-4">                                                                                                 
                                                    <label>Nombre del Producto</label>
                                                    <label class="input">
                                                        <!-- <i class="icon-append fa fa-calendar"></i> -->
                                                        <input type="text" #nombre
                                                            (keyup.enter)="addHero3(nombre.value)"
                                                            (blur)="addHero3(nombre.value); nombre.value=''" 
                                                            placeholder=""
                                                            (keyup)="onGetFechaReserva($event)"
                                                            saUiDatepicker date-format="dd/MM/yy"/>
                                                    </label>
                                            </section>

                                        </div>

                                        <div class="row">

                                            <section class="col col-4">
                                                    <label>Descripción</label>
                                                    <textarea #descripcion
                                                    cols="2" rows="2" style="margin: 0px; width: 178px; height: 178px;"
                                                    (blur)="addHero3(descripcion.value); descripcion.value=''" 
                                                    >
                                                    </textarea>
                                            </section>   

                                            <section class="col col-4">
                                                    <label>Cantidad</label>
                                                    <label class="input">
                                                        <!-- <i class="icon-append fa fa-calendar"></i> -->
                                                        <input #cantidad
                                                            type="text"
                                                            placeholder=""
                                                            (blur)="addHero3(cantidad.value); cantidad.value=''" 
                                                            (keyup)="onGetFechaReserva($event)"
                                                            saUiDatepicker date-format="dd/MM/yy"/>
                                                    </label>
                                            </section>   

                                            <section class="col col-4">
                                                    <label>Precio Unidad</label>
                                                    <label class="input">
                                                        <!-- <i class="icon-append fa fa-calendar"></i> -->
                                                        <input #precio
                                                        (blur)="addHero3(precio.value); precio.value=''" 
                                                            type="text"
                                                            placeholder=""
                                                            (keyup)="onGetFechaReserva($event)"
                                                            saUiDatepicker date-format="dd/MM/yy"/>
                                                    </label>
                                            </section> 

                                        </div>

                                        <div class="row">

                                            <section class="col col-4">
                                            </section>

                                        </div>

                                        <div class="row">

                                                <section class="col col-4">    
                                                </section>

                                                <section class="col col-4" style="text-align: center;"> 
                                                        <button type="submit"  class="btn btn-lg btn-primary" 
                                (click)="agregarpedidoproyectado(newHero3.value,nombre.value,descripcion.value,cantidad.value,precio.value)">
                                                                <i>Aceptar</i>  
                                                        </button> 
                                                </section>

                                                <section class="col col-4" style="text-align: center;" >
                                                        <button type="submit" class="btn btn-lg btn-primary" (click)="modalRef.hide()">
                                                                <i>Cancelar</i>  
                                                        </button>         
                                                </section>

                                        </div>
                                        </fieldset>
                                    </div>
                                </div>
                                <!-- </div> -->
                            </ng-template>

                            <section class="col col-2" >
                                    
                                </section>
                                <section class="col col-2">
                                    </section>
                                    <section class="col col-2">
                                        </section>
                                        <section class="col col-2">
                                            </section>
                            <section class="col col-2" style="text-align:right">
                                    <!-- <button type="submit" class="btn btn-lg btn-primary" >
                                            Descargar <i class="fa fa-file-excel-o"></i>  
                                    </button>                                  -->
                            </section>
                            </div>
                    </fieldset>
                </div>
            </div>
        </div>

        <div id="content" class="search-view">
            <div class="consulta-creator">
                <div class="smart-form">

                    <div class="row">
                        <div class="col col-6">
                            <label></label>
                            <!--<label>Resultado: {{reservaResult.length}}</label>-->
                        </div>
                    </div>

                    <div class="row">
                        <div class="widget-body">
                            <div class="table-responsive col-md-12">
                                
                                <table class="table table-bordered">
                                    <thead>
                                    <tr>
                                        <th class="text-center">Enviar</th>
                                        <th class="text-center">Eliminar</th>
                                        <th class="text-center">Editar</th>
                                        <!-- <th>Opciones</th> -->
                                        <th class="text-center">Número de Pedido</th>
                                        <th class="text-center">Fecha de Pedido</th>
                                        <th>Local</th>
                                        <th class="text-center">Estado</th>
                                        
                                        <th>Nombre del Producto</th>
                                        <th>Descripción</th>
                                        <th class="text-center">Cantidad</th>
                                        <th class="text-center">Precio</th>
                                        <th class="text-center">Costo</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr *ngFor="let asset of abastecimientoResult">
                                        <!-- <td class="text-center" width="40">
                                            <a href="javascript:void(0)" class="link" (click)="idDetalleGoodleMap(asset)" *ngIf="asset.estado_deliv === 'procesado'">
                                                <span class="fa fa-eye"></span></a>
                                        </td> -->

                                        <td class="text-center" width="40">
                                                <a href="javascript:void(0)" *ngIf="asset.estado == 'Enviar'" >
                                                    <span  class="fa fa-paper-plane" data-toggle="tooltip" data-placement="top" title="Enviar Pedido"></span></a>
                                        </td>

                                        <td class="text-center" width="40">
                                                <a href="javascript:void(0)" *ngIf="asset.estado !== 'Recibido'" class="link">
                                                    <span class="fa fa-trash" data-toggle="tooltip" data-placement="top" title="Eliminar Pedido" (click)="openModal2(templateeliminar)"></span></a>
                                        </td>

                                        <td class="text-center" width="40">
                                                <a href="javascript:void(0)" *ngIf="asset.estado == 'Enviar'"  class="link" >
                                                    <span class="fa fa-pencil" data-toggle="tooltip" data-placement="top" title="Editar Pedido"></span></a>
                                        </td>
                                        <td class="text-center">{{asset.idPedidoProyectado}}</td>
                                        <td class="text-center">{{asset.fecha}}</td>
                                        <td>{{asset.descripcionlocal}}</td>
                                        <td class="text-center" [style.background-color]="asset.color">{{asset.estado}}</td>
                                        
                                        <td>{{asset.nombre}}</td>
                                        <td>{{asset.descripcion}}</td>
                                        <td class="text-center">{{asset.cantidad}}</td>
                                        <td class="text-center">{{asset.precio}}</td>
                                        <td class="text-center">{{asset.costo}}</td>
                                    </tr>
                                    </tbody>
                                </table>
                                

                                        <!-- Modal de Agregar Pedido -->
                            <ng-template #templateeliminar>

                                    <div class="modal-header"  style="text-align: center;">
                                          <h4 class="modal-title pull-left">Pedido: </h4>
                                          <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                                            <span aria-hidden="true">&times;</span>
                                          </button>
                                    </div>

                                    <!-- <div class="modal-body" > -->
                                    <div class="widget-body" style="height:120px">
                                        <div id="order-form" class="smart-form">
                                            <fieldset> 

                                            <div class="row" style="text-align: center;">   
                                                <section class="col col-12"  style="text-align: center;">
                                                    <label style="text-align: center;">¿Está seguro de querer eliminar el pedido seleccionado?</label>                                                
                                                </section>
                                            </div>
    
                                            <div class="row">
    
                                                    <section class="col col-6"  style="text-align: center;">    
                                                            <button type="submit"  class="btn btn-lg btn-primary" (click)="eliminarpedidoproyectado($event)">
                                                                    <i>Aceptar</i>  
                                                            </button> 
                                                    </section>
    
                                                    <section class="col col-6" style="text-align: center;"> 
                                                            <button type="submit"  class="btn btn-lg btn-primary" (click)="modalRef.hide()">
                                                                    <i>Cancelar</i>  
                                                            </button> 
                                                    </section>    
    
                                            </div>
                                            </fieldset>
                                        </div>
                                    </div>
                                    <!-- </div> -->
                                </ng-template>
    
                                
                            </div>
                        </div>
                    </div>
                    
                    <br>
                    <br>
                    <div class="row">
                        <div class="widget-body">
                            <div class="table-responsive col-md-12">
                                <table class="table table-bordered">
                                    <thead>
                                    <tr>
                                        <th>Total</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr *ngFor="let asset of pedidoResult">
                                        <!-- <td class="text-center" width="40">
                                            <a href="javascript:void(0)" class="link" (click)="irDetallePedido(asset)">
                                                <span class="fa fa-eye"></span></a>
                                        </td> -->
                                        <td style="text-align:right">{{asset.total}}</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <p-dialog header="Mensaje" [(visible)]="display" modal="modal" width="300" [responsive]="true">
            <p>Estimado desea elegir la misma mesa de siempre?</p>
            <p-footer>
                <button type="button" pButton icon="fa-check" (click)="yesQuestion()" label="Si"></button>
                <button type="button" pButton icon="fa-close" (click)="noQuestion()" label="No"></button>
            </p-footer>
        </p-dialog>
</div>


<script type='text/javascript'>
    $(function(){
    $('.input-group.date').datepicker({
        calendarWeeks: true,
        todayHighlight: true,
        autoclose: true
    });  
    });
</script>